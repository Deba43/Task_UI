<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Home</title>
    <style>
      h1 {
        text-align: center;
      }
      .searchContainer {
        width: 80%;
        margin: auto;
        display: flex;
        flex-direction: row;
        justify-content: center;
        gap: 15px;
      }

      li {
        margin-bottom: 15px;
      }
      .task-card {
        margin-bottom: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
      }
      .task-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }
      .task-header {
        background-color: #f8f9fa;
        padding: 15px;
        border-bottom: 1px solid #ddd;
        border-radius: 8px 8px 0 0;
      }
      .task-body {
        padding: 15px;
      }
      .task-footer {
        background-color: #f8f9fa;
        padding: 10px 15px;
        border-top: 1px solid #ddd;
        border-radius: 0 0 8px 8px;
      }
      .badge {
        font-size: 0.9em;
        padding: 5px 10px;
      }
      .priority-high {
        background-color: #dc3545;
        color: white;
      }
      .priority-medium {
        background-color: #ffc107;
        color: black;
      }
      .priority-low {
        background-color: #28a745;
        color: white;
      }
    </style>
  </head>
  <body>
    <h1>Search Tasks</h1>

    <div class="searchContainer">
      <span class="col-1"><label for="Search"> Search Task By :</label></span>
      <span class="col-2"
        ><select name="search" id="searchTasks" required>
          <option value="" selected>select</option>
          <option value="title">Title</option>
          <option value="location">Location</option>
          <option value="category">Category</option>
          <option value="eventDate">Event Date</option>
        </select></span
      >
      <span class="col-3" id="searchDiv" style="display: none">
        <label id="SearchFieldName"></label>
        <input id="InputField" type="text" />
        <span class="searchButton"><button>Search</button></span>
      </span>
    </div>

    <div class="displaySearch">
      <div class="row" style="margin-top: 50px">
        <!-- Loop through tasks -->
        <div th:each="task : ${tasks}" class="col-md-6">
          <div class="task-card">
            <div class="task-header">
              <h5 th:text="${task.title}" class="card-title"></h5>
            </div>
            <div class="task-body">
              <p th:text="${task.description}" class="card-text"></p>
              <ul class="list-unstyled">
                <li>
                  <strong>Status:</strong>
                  <span
                    th:text="${task.status}"
                    class="badge bg-secondary"
                  ></span>
                </li>
                <li>
                  <strong>Priority:</strong>
                  <span
                    th:if="${task.priority == 'HIGH'}"
                    class="badge priority-high"
                    >High</span
                  >
                  <span
                    th:if="${task.priority == 'MEDIUM'}"
                    class="badge priority-medium"
                    >Medium</span
                  >
                  <span
                    th:if="${task.priority == 'LOW'}"
                    class="badge priority-low"
                    >Low</span
                  >
                </li>
                <li>
                  <strong>Event Date:</strong>
                  <span
                    th:text="${#temporals.format(task.eventDate, 'dd MMM yyyy')}"
                  ></span>
                </li>
                <li>
                  <strong>End Date:</strong>
                  <span
                    th:text="${#temporals.format(task.endDate, 'dd MMM yyyy')}"
                  ></span>
                </li>

                <li>
                  <strong>Category:</strong>
                  <span th:text="${task.category}" class="badge bg-info"></span>
                </li>
                <li>
                  <strong>Location:</strong>
                  <span th:text="${task.location}"></span>
                </li>
              </ul>
            </div>
            <div class="task-footer">
              <a href="#" class="btn btn-primary">Sign Up</a>
              <a href="#" class="btn btn-outline-secondary">Save Task</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const searchval = document.getElementById("searchTasks");

      const SearchFieldName = document.getElementById("SearchFieldName");

      const InputField = document.getElementById("InputField");

      const searchDiv = document.getElementById("searchDiv");

      const newInputField = document.createElement("input");

      searchval.addEventListener("change", (e) => {
        if (searchval.value) {
          searchDiv.style.display = "block";
          if (e.target.value == "title") {
            SearchFieldName.textContent = "Enter Title :";

            newInputField.type = "text";
          } else if (e.target.value == "location") {
            SearchFieldName.textContent = "Enter Location :";
            newInputField.type = "text";
          } else if (e.target.value == "category") {
            SearchFieldName.textContent = "Enter Category :";
            newInputField.type = "text";
          } else if (e.target.value == "eventDate") {
            SearchFieldName.textContent = "Enter Event Date :";
            newInputField.type = "date";
          } else {
            alert("Selecting Options is required");
          }
        } else {
          searchDiv.style.display = "none";
        }

        InputField.replaceWith(newInputField);
      });
    </script>
    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
  </body>
</html>
